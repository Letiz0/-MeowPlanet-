@model IEnumerable<MeowPlanet.ViewModels.LikeAdopts>
<link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
<link href="~/lib/bootstrap/dist/css/animista.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
      integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
      crossorigin="anonymous" referrerpolicy="no-referrer" />

@{
    string status = "";
}

 <table class="table table-dark table-hover owners">
                <thead>
                    <tr>
                        <th scope="col"></th>
                        <th scope="col">貓貓</th>
                        <th scope="col">品種</th>
                        <th scope="col">年齡</th>
                        <th scope="col">性別</th>
                        <th scope="col">狀態</th>
                        <th scope="col">申請人手機</th>
                        <th scope="col"></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in @ViewBag.owner)
                    {
                        <tr id="@item.CatId" value="@item.CatId" class="table-dark">
                            <td class="table-dark">
                                @if (@item.CatImg1 != null)
                                {
                                    <img src="@Url.Content(@item.CatImg1)">
                                }
                                else
                                {

                                }
                            </td>
                            <td class="table-dark">
                                @item.CatName
                            </td>
                            <td class="table-dark">
                                @item.BreedName
                            </td>
                            <td class="table-dark">
                                @item.CatAge 歲
                            </td>
                            <td class="table-dark">
                                @if (@item.CatSex == false)
                                {
                                    <i class="fa-solid fa-venus" style="color:#FF8EFF;font-size:1.3rem"></i>
                                }
                                else
                                {
                                    <i class="fa-solid fa-mars" style="color:#99b8d4;font-size:1.3rem"></i>
                                }
                            </td>
                            <td class="table-dark status">
                                @if (@item.Status == 0)
                                {
                                    status = "等待中";
                                }
                                else if (@item.Status == 1)
                                {
                                    status = "已拒絕";

                                }
                                else
                                {
                                    status = "已同意";
                                }
                                @status
                            </td>
                            <td class="table-dark">
                                @item.Phone
                            </td>
                            <td class="table-dark">
                            @if (@item.Status == 0)
                            {                               
                                    <button id="@item.CatId" type="button" class="btn btn-outline-secondary no"><i class="fa-solid fa-xmark"></i></button>
                                    <button class="btn btn-outline-secondary yes"><i class="fa-solid fa-check"></i></button>
                            }
                            </td>

                        </tr>
                    }
                </tbody>
         
  </table>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/11.1.9/sweetalert2.all.min.js"
        integrity="sha512-IZ95TbsPTDl3eT5GwqTJH/14xZ2feLEGJRbII6bRKtE/HC6x3N4cHye7yyikadgAsuiddCY2+6gMntpVHL1gHw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    $(".no").click(function() {
        var catid = $(this).attr("id")
        Swal.fire({
            title: "確定要拒絕申請嗎？",
            text: "拒絕申請後不可取消，請慎重考慮！",
            icon: 'question',
            showCancelButton: true,
            confirmButtonColor: '#B99668',
            cancelButtonColor: '#4B5461',
            confirmButtonText: '拒絕'
        }).then(function(result) {
            if (result.value) {
                Swal.fire(
                    '已拒絕申請！',
                    '',
                    'success'
                ).then(function(result) {                       
                    $.ajax({
                        method: 'post',
                        url: '/Adoption/OwnerNo',
                        data: { catid: catid },
                        dataType: 'json',
                        success: function(data) {               
                   
                        },
                        error: function() {
                            status += '<h1>222</h1>';
                             $(".owners").empty();
                             $('.owners').html(status);
                        }
                    });
                }
                )
            }
        });
    });

</script>